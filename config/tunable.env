# Ideal Configuration - Best Practices per RETRY.md
# Designed to avoid retry storms and improve system resilience

## A → B Settings (Ideal - Client Backoff)
A_TO_B_TIMEOUT_S=30                # Reduced from 60s - faster failure detection
A_TO_B_MAX_RETRIES=2               # Reduced from 3 - less retry amplification

## B → C Settings (Ideal - Per RETRY.md)
CONNECT_TIMEOUT_S=0.35             # RETRY.md spec: ~0.35s
REQUEST_TIMEOUT_S=3.0              # RETRY.md spec: ≤3s (reduced from 10s)
ENABLE_B_TO_C_RETRIES=true         # Enable but limited
MAX_B_TO_C_RETRIES=1               # RETRY.md spec: 1 retry to different C
B_TO_C_RETRY_BACKOFF_MS=100        # Fast retry for connection failures

## C → D Settings (Ideal - Per RETRY.md)
DEVICE_TIMEOUT_S=3.0               # RETRY.md spec: ~3s (reduced from 60s)
ENABLE_C_TO_D_RETRIES=false        # RETRY.md spec: Never retry devices
MAX_C_TO_D_RETRIES=0               # RETRY.md spec: 0 retries

## Response Headers (Ideal - Client Guidance)
ENABLE_RETRY_AFTER_HEADERS=true    # Add backoff guidance
RETRY_AFTER_SECONDS=0.2            # RETRY.md spec: 0.1-0.3s

## Error Mapping (Standard)
MAP_RESOURCE_EXHAUSTED_TO_429=true
MAP_UNAVAILABLE_TO_503=true
MAP_DEADLINE_EXCEEDED_TO_504=true

## Device Settings
SLOW_MULTIPLIER=3.3

# ==================================================================
# EXPERIMENT SUGGESTIONS:
#
# Experiment 1: Timeout Impact
# - CONNECT_TIMEOUT_S: 0.1 → 0.35 → 1.0
# - REQUEST_TIMEOUT_S: 1.0 → 3.0 → 10.0
# - Observe: Connection failure rates, latency patterns
#
# Experiment 2: B→C Retry Impact  
# - ENABLE_B_TO_C_RETRIES: false → true
# - MAX_B_TO_C_RETRIES: 0 → 1 → 3
# - Observe: Success rates, retry amplification
#
# Experiment 3: Retry-After Headers
# - ENABLE_RETRY_AFTER_HEADERS: false → true
# - RETRY_AFTER_SECONDS: 0.1 → 0.2 → 1.0
# - Observe: Client backoff behavior, retry patterns
#
# Experiment 4: Device Timeout Impact
# - DEVICE_TIMEOUT_S: 1.0 → 3.0 → 8.0  
# - Observe: C→D timeout rates, end-to-end latency
# ==================================================================